---
title: Прошивка и настройка Android-телефона
date: 2021-06-02T03:16:45+03:00
modified: 2021-08-24T13:33:23+03:00
tags: native
comments: 127
---

- Оглавление
{:toc}

план-капкан
---

+ зачем прошивать и вообще что это
+ сток/кастом прошивки
+ разблокировка загрузчика. некоторые производители говнари и не дают шить сторонние прошивки
+ рекавери. что это и для чего
- ADB, fastboot что можно и что нельзя
- root-права и ограничения при их наличии/отсутствии
+ debloat (bloat - раздувать). удаление стандартного софта
- замена стандартноого софта
- повысь конфиденциальность
- откажись от гугла. как скачать APK без плей маркета
- что можно сделать из старого телефона. китайские поддельные телефоны (их в топку)
- некоторые телефоны просто ломаются без причины (дешевые компоненты)


## Firmware

Для получения максимум пользы от вашего деревяного смартофона надо:
1) накатить кастом прошивку или, при невозможности
2) оптимизировать настройки стоковой прошивки

Процесс прошивки кастома (метод recovery):
- разблокировать загрузчик
- установить кастом рекавери TWRP
- зайти в рекавери и установить прошивку

Прошивка через комп чуть сложнее. Но можно ставить как сток, так и кастом. А если телефон окирпичен, то это единственный вариант. Официальная прошивка: 
- качаете прошивку, 
- качаете программу установки и 
- прошиваете по инструкции с 4pda. 

Для заливки неофициальных прошивок (метод fastboot) в целом все точно так же. Только надо предварительно разблокировать загрузчик. Бывает производитель встраивает в загрузчик тампер (защиту от подделки) и тогда приходится дополнительно накатывать патч через рекавери. Но в нормально собранных кастомах все уже встроено и беспокоиться об этом не нужно

Если на телефон нет кастом прошивок или нет возможности разблокировать загрузчик, то можно оставить стандартную прошивку и вычистить из нее все ненужное говно (сделать debloat). У меня есть заметка как это делать. Также стоит отметить, что бывают кастом-прошивки "на основе официальных". То есть это сток прошивка, из образа которой заранее вычистили все предустановленные зонды. Это максимум, что можно сделать без разблокировки загрузчика!

## Bootloader
Перед любыми подификициям системных файлов надо сначала разблокировать загрузчик и только тогда сможешь получить контроль над своим собственным девайсом. Но некоторые производители типа саянов требуют паузу 720(!) часов перед тем как дать тебе возможности шиться. Что тут скажешь - плохие люди, если без мата. Но некоторые производители (не будем тыкать пальцами в хуавей) вообще не дают такой возможности. 

Даже если энтузиасты как-то и смогут хакнуть систему безопасности, например через уязвимость в процессоре, то это вовсе не означает что можно будет установить любую открытую прошивку. Чуть выше по иерархии после загрузчика стоит ядро системы. Оно уже располагается во флеш-памяти (загрузчик же - это часть микропрограммы процессора). В ядре хранятся методы общения с железом - всякие драйверы на тачскрин, камеру, модем и т.д. Исходники ядра все равно должен предоставить производитель. Он может этого и не делать. Такое часто бывает со свежими аппаратами.

Методы разблокировки по производителям:
- xiaomi. официально через mi-аккаунт и программу MiUnlockTool
- huawei. никак (за редкими исключениями)
- samsung. хз
- остальные китайцы. через консольную команду fastboot oem unlock

## Recovery
Рекавери - это меню восстановления. В него можно зайти даже если слетела прошивка. Стандартное рекавери представляет весьма ограниченный функционал, поэтому энтузиастами было написано стороннее рекавери. Его назвали TWRP. Поскольку рекавери запускается как-бы "рядом" с системой, то через него можно получить доступ к системным файлам "только для чтения". В частности можно нахрен отформатировать разел `/system` или же записать на его место что-то свое. Это я сейчас так незамысловато описал процесс установки сторонней прошивки

Перед тем как запускать рекавери, его нужно установить. Делается это через комп и через fastboot. Загрузчик должен быть разблокирован. 
```
fastboot devices
fastboot erase recovery
fastboot flash recovery twrp.img
```

## Debloat
Debloat (bloat - раздувать). удаление стандартного софта

Через ADB можно отключить приложения и они не смогут самостоятельно включиться до заводского сброса. Если есть разблокированный загрузчик+рекавери+рут, то этот список тебе тоже будет интересен.

Какие стандартные приложения можно безопасно удалить? Я составил несколько списков программ, которые я отключаю на своих телефонах в первую очередь. Посмотреть можно в разделе [delete-list](#delete-list)

Не стоит чрезмерно усердствовать, ато можно понаудалять лишнего. Например обязательно оставь программу WebView - через нее многие программы отрисовывают свой интрфейс, или делают запросы в сеть. А переустановить ее невозможно, поэтому придется прошивать

Программы для облегчения очистки телефона:
- 0x192/universal-android-debloater. норм. самый актуальный список приложений в интернете. хотя и не идеальный
  [github](https://github.com/0x192/universal-android-debloater/releases),
  [список пакетов](https://raw.githubusercontent.com/0x192/universal-android-debloater/main/resources/assets/uad_lists.json)
- ADB_AppControl. норм. графисческий интерфейс.
  [оф.сайт](https://adbappcontrol.com/)
- XiaomiADBFastbootTools. устарело. 
  [github](https://github.com/Szaki/XiaomiADBFastbootTools)
- ADB-RUN. adb с консольным псевдоинтерфейсом
  [4pda](https://4pda.to/forum/index.php?showtopic=437824), 
  [оф.сайт](https://androidp1.ru/adb-run-obzor-funktsiy/)
- ApkShellext2. Показ иконок apk в интерфейсе проводника windows
- adb
- ADB Explorer <https://www.microsoft.com/store/productid/9PPGN2WM50QB?ocid=pdpshare>
- Android ADB - плагин для Total Commander, что бы копировать файлы с телефона на комп и обратно <https://4pda.to/forum/index.php?showtopic=998856>


## Свободные программы
У меня есть [список программ для андроид](/r/android.md), которыми я пользуюсь и которые всем рекомендую.

Не плей-маркетом единым. Программы можно скачивать в формате APK из официального сайта разработчика. Или из не очень официальных источников. Но благо нам не порезали возможность ставить сторонние программы (надолго ли?)

Сайты и программы где качать APK:
- 4pda - форум
- app and game 4pda - клиент 4пда
- Aurora store - опренсорс клиент гугл плей маркета
- [Raccoon](https://4pda.ru/forum/index.php?showtopic=592899&st=160#entry98072856)
- <http://apkdl.net> 
- t.me/apkdl_bot
- <https://apkcombo.com/ru/>


## Списки на удаление
{: #delete-list }


### google  
Удаляю тупо все программы от гугла. Исключение разве те, без которых ломается прошивка. Например WebViev. Под нож попадает даже гугловская звонилка - благо есть чем заменить из опенсорсного. И главное есть такая возможность - это вовсе не очевидно :-)

<details markdown="1"><summary markdown="0">спойлер</summary>

```
# google play сервисы. на старых телефонах очень сильно тормозит
com.android.gms
# chrome. браузер. бесполезный если есть альтернативы
com.android.chrome
com.google.android.apps.books-1
com.google.android.apps.docs-1
com.google.android.apps.docs-2
com.google.android.apps.magazines-1
com.google.android.apps.maps-1
com.google.android.apps.translate-1
com.google.android.apps.plus-1
com.google.android.gm-1
com.google.android.marvin.talkback-1
com.google.android.music-1
com.google.android.play.games-1
com.google.android.talk-1
com.google.android.tts-1
com.google.android.videos-1
com.google.android.youtube-1
```
</details>

## xiaomi
<details markdown="1"><summary markdown="0">спойлер</summary>

<https://4pda.to/forum/index.php?showtopic=921645#entry77962469>
```
msa

```
</details>

## Motorola

<details markdown="1"><summary markdown="0">спойлер</summary>

Список составлял сам на основе: [источник](https://4pda.to/forum/index.php?showtopic=526899&st=10080#entry38586664)

```
com.motorola.migrate-1
com.motorola.bodyguard-1
com.motorola.fmplayer-1
com.motorola.genie-1
com.motorola.contextual.smartrules2-1
com.motorola.setup
```
</details>



## Полезные ссылки
- [Полезные андроид приложения без найденных трекеров и логеров и в лучшем случае - с отсутствием разрешения доступа в интернет | Платные и бесплатные полезные андроид приложения (и их лучшие альтернативы) без явно обнаруживаемой слежки за пользователем
](https://4pda.to/forum/index.php?showtopic=10051080
- Android ADB - плагин для Total Commander, что бы копировать файлы с телефона на комп и обратно <https://4pda.to/forum/index.php?showtopic=998856>

