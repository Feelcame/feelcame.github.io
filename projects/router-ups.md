---
tags: hard
title: RouterUPS. Бесперебойник для роутера
date: 2022-11-22T00:00:00
---

Короче із-за йобаної русні у нас часто виключають електрику. Разом з нею тухне і все остальне. Но так же як і базові станції операторів чи телефонні АТС, інтернет продовжує работать на акумуляторах. Оператор інтернет дає, просто із-за відсутності світла його ніхто не забирає. Треба виправити цю несправедливість. Я ж не кацап і не чмобік шоб терпіти. Доречі, шо там по русні? - Русні пизда!

## Теорія
Стандартний БП от роутера видає 12 вольт і 0.5 ампера. Так воно і приходе в роутер. Далі стоїть понижуючий перетворювач - він видає 5v або 3.3v. Іменно така робоча напруга всіх контролерів роутера. А це означає, шо можна подати на вході п'ять вольт із повербанка. Сказано - зроблено. Зкрлхозив кабель USBA-DC5521. Мій роутер робе. Супер. Тепер я не останусь без інтернету під час відключень. Бо у сотових операторів без свєта інтернет тоже не дуже так робе.

## Аккум
2шт акб стандарта 18650 включенные последовательно. Обеспечат напряжение от 6 до 8.4 вольт. Этого достаточно для большинства роутеров.

Защита аккумов платой BMS. Дополнительно защита из триггера с гистерезисом (об этом ниже). Зарядка модулем TP5100. На вход модуля подаётся напряжение от родного БП роутера 9-12вольт. 

Входной разъем DC5521 или DC5525. Опционально можно самому допаять ещё один разъем, место на плате есть, а в корпусе выемка для вырезания. Лучше не подключать в параллель два БП, иначе будет фейерверк  

На выходе два провода. На выбор DC5521 и DC5525 в любой комбинации. Подключены внутри через клеммы 5.08мм, каждый кабель к своей клемме. Ещё одна, третья клемма свободна, она для установки разъема USB через понижающий модуль Mini360. Провода скручены в узелок и залиты термоклеем.

Триггер питания
На полевых транзисторах. Выполняет функцию "логическое или". Если есть питание от сети, то работает от него, а линия аккума разорвана полевиком. Когда пропадает питание, открывается полевик и пропускает ток из акб.

Защёлка защитная.
Триггер Шмидта на оу. Когда напряжение падает ниже чем 10% заряда, то цепь разрывается. И не восстанавливается, пока акб не будет заряжен хоть на 50%. Эта защита должна сработать до того, как уйдет в защиту плата BMS. Должна быть кнопка для ручного сброса защёлки, а ее удержание позволяет не обращать внимание на защиту. Подобное было в статье про повербанк


Версия для запитки от повербанка. Просто триггер без акб. Только пять вольт. В комплекте четыре кабеля - по два каждого DC5521 и DC5525. Подключаются так же в клеммы. Также в комплекте зарядка от телефона с microUSB для зарядки повербанка.


## защиты

для защиты свинцовых аккумуляторов нужно ещё обеспечить выключение при достижении конца заряда. Можно это сделать с помощью операционного усилителя. Мониторить ток и напряжение. Когда при определенном напряжении идёт уже очень маленький ток - надо отключить заряд и не возобновлять до падения на определенный уровень. Вместе с защитой от переразряда это будет норм тема. Можно сделать на мчетвереннгм оу. Один канал на защиту от переразряда, второй от перезаряда, третий защита по току, четвертый усилитель токового шунта. 

  - добавить защиту от переполюсовки питания. На мосфете или добавить диодный мостик
  - добавить линейный стабилизатор на 60+ вольт по входу и 5v по выходу. На транзисторе и стабилитроне
  - добавить защиту от повышенного напряжения на компараторе. При перегрузке пищит буззер
  - добавить защиту от перегрузки по току и от кз. Икающего типа. Пищит при перегрузке


Бесперебойник для роутера. Два входа слева, два выхода справа и два кабеля для повербанка снизу. На входе DC5521 и microUSB. На выходе два клемника, в которые подключены два кабеля с разъёмами dc5521. Провода на повербанк USB-AM и microUSB. Сверху выключатель


## от повербанка
Повербанк для роутера, бесперебойник интернета.

Черный коробочек, в нем одно гнездо и три провода торчит на противоположной стороне. 

1. Круглый разъем DC5521. Вход напряжения от родного БП от роутера
2. Кабель USB-AM, вставляется в повербанк
3. Кабель DC5521 для оптического модема
4. Кабель DC5521 для роутера

Внутри триггер для переключения на диоде с п-мосфетом, повышайка на 12 вольт и все. Когда отключается электричество - питание подается от внешнего аккума. 

Умельцам могу скинуть схему (бесплатно). Для остальных предлагается готовое устройство в красивом корпусе и со всеми необходимыми защитами за небольшую стоимость

Повербанк заряжается от отдельного блока питания. В комплект не входит ни зарядка ни повербанк. Предполагается что они уже есть в налчии у пользователя

В комплекте полоска двустороннего скотча, что бы прикрепить сие чудо на повербанк


## Объява
Повербанк для роутера, бесперебойник интернета.

Черный коробочек, в нем одно гнездо и три провода торчит на противоположной стороне. 

1. Круглый разъем DC5521. Вход напряжения от родного БП от роутера
2. Кабель USB-AM, вставляется в повербанк
3. Кабель DC5521 для оптического модема
4. Кабель DC5521 для роутера

Внутри триггер для переключения на диоде с п-мосфетом, повышайка на 12 вольт и все. Когда отключается электричество - питание подается от внешнего аккума. 

Умельцам могу скинуть схему (бесплатно). Для остальных предлагается готовое устройство в красивом корпусе и со всеми необходимыми защитами за небольшую стоимость

Повербанк заряжается от отдельного блока питания. В комплект не входит ни зарядка ни повербанк. Предполагается что они уже есть в налчии у пользователя

В комплекте полоска двустороннего скотча, что бы прикрепить сие чудо на повербанк

## Одна банка лития
Для бесперебойника под роутер можно использовать повышающий модуль на tps61003. Два штуки по $2 и платы триггеры с юсб А. По 70 центов. Аккум 1s3p например. Плюс стандартная обвязка: зарядка, триггер для запитки напрямую. 

Или юзать три последовательных аккумулятора

## Лампочка судного дня

Одну из лампочек в люстре меняем на светодиод от фонарика. Или на точечный светильник 12в. Он будет на гибкой ножке, что бы направить его куда надо. Патрон используется как розетка. От него работает блок питания 12 вольт. И от туда же заряжается аккумулятор. Аккум крепится на люстре в незаметном месте. 

Лампочка работает как резервный источник света. Когда вырубят электричество - она одна останется светить. За эту функцию отвечает встроенное реле. Оно закрыто, когда есть электричество. 

Лампочку можно выключать, чтобы она не тянула последние соки из аккума. Для этого выведен слаботочных пины, к которым можно подключить выключатель с фиксацией. Выключатель предлагается ставить рядом с основным выключателем на 220в. Провода к нему можно сделать тонкими - ток там течет мизерный



## Полезные ссылки
- защита для свинцово кислотных аккумуляторов с гистерезисом на компараторе <http://9zip.ru/home/lead_acid_battery_discharge_protection_circuit.htm>
- [защита акб на таймере 555 по схеме генератора одиночного импульса](https://volstr.ru/?p=102)
- [Защита от КЗ на полевом транзисторе](https://www.kondratev-v.ru/zashhita-radioapparatury/zashhita-ot-kz-na-polevom-tranzistore.html)

