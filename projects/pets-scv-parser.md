---
title: Страница для питомника животных
date: 2022-02-05T17:00:00+02:00
---

Есть база данных со списком бездомных животных. В базе хранится журнал вакцинаций и т.п. Нужно сделать страницу, где будет публиковаться эта информация. Возможно еще нужно добавить возможность свыязаться с питомнико для того что бы приютить какую либо животинку 

### Версия 1. Прототип
Ранее я работал с Jekyll CMS и знаю, что она умеет работать с CSV-файлами как с базой данных для генерации статических страниц. Был написан скрипт Liquid, который выводит знаачения таблицы в нужном формате. При этом сохраняется возможность писать кастомные стили для элементов страницы. Скрипт по сути проходится циклом по data файлу и выводит нужные поля в правильном месте

### Версия 2. Обработка корнфиденциальности
Поля где содержится личная информация про опекуна нужно обрабатывать особым образом. Поэтому для поля имя/адрес добавлена проверка, позволяющая выводить разные данные при наличии конф.данных или при их отсутствии. 

Эта версия работала оффлайн, генерировала html-файлы, которые потом нужно просто скопировать на хостинг. Также сделан отдельный репозиторий на Github Pages, который позволяет автоматизировать процесс и вести всю обработку прямо на сервере. Для обновления данных надо вностить изменения прямо в файл CSV-таблицы. Страницу потом можно заинклюдить на оригинальный сайт или использовать сгененрированный сайт как основной. Все это работало норм, было сделано демо. Страница выглядит органично, просматривать удобно.

К сожалению, лежащая в публичном репозитории база ломает всю конфиденциальность. На момент написанию скрипта мне не было известно нужна ли будет обработка конфиденциальности на этом сайте или нет, но предусмотреть такой вариант все-равно нужно. Из-за сложности установки офлайн-среды и заливки всего дела на хостинг мне не хотелось возиться с обучением тёток. Равно как и не хочется платить за приватный репозиторий для github-pages. 

Пример: [**ссылка**](../demo/pets/index.md)

### Версия 3. Надоело. PDF
Поскольку сотрудницы не смогли разобраться в моей программе и ввиду проблем с бещзопасностью, пришлось повременить с внедрением данной системы. Как временное решение мы генерируем PDF тупо из Excell, где ведется база и инклюдим в страницу именно его, а не сайт-прослойку. Впринцыпе решение рабочее, но нет никакой обработки

### Версия 4. Десктопное приложение Go
Если уж для нормальной конфиденциальности нужно ставить среду Jekyll на комп, то не проще ли написать отдельное приложение, которое в один клик сконвертирует csv в html? Так и сделаем. Сейчас я остановился на языке Go и библиотеке Fyne для GUI. Парсинг csv через библиотеку тоже. Программа пока не готова. Но на выходе должен получаться файл HTML или PDF с уже предобработанными данными.


### еще варианты.
- сайт питомника работает на wordpress. можно написать плагин и работать через него. но опыта тут у меня мало, браться за это скорее всего не буду
- js. Не так уж сложно будет переписать данную логику на js. Тоесть обычный файл htm, который запускается в браузере. У него внутри скрипт, который все парсит и сохраняет на диск. Проблем с бимблиотекамии быть не должно. Захостить можно на любом хостинге, или даже просто на почту / в телеграм ортправуить. Ничего не нужно устанавливать не нужно - браузер есть у всех. С графическим интерфейсом тоже проблеми возникнуть не должно

название: petinfo

## Полезные ссылки
- [экспорт csv из excel с кавычками и запятыми](https://learn.microsoft.com/en-US/office/troubleshoot/excel/export-text-file-with-comma-quote)
