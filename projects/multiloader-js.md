---
title: Телеграм как хостинг файлов c доступом по URL
date: 2021-11-08T20:23:00
tags: coding
---

## Смыл сих действий
Идея в том, что бы можно было передавать жирненькие файлы через сервера телеграм и не париться. Сейчас размер файла ограничен в 20Мб. Поэтому придется бить на куски. (_лол, этот сайт в 20Mb поместится 100 раз :smile:_)

Все уже есть готовое, вручную работает. Для лакшери автоматизации нужен только скрипт, позволяющий сделать множественную загрузку файлов со страницы. 


## Алгоритм
- создать многотомный архив по 20 Мб. Винрар такое умеет. 20 мб - это лимит для телеграм ботов
- загрузить в бот [tlgur](https://t.me/tlgurbot) много файлов. Он дает прямые ссылки на скачивание файлов из телеги по урл. Видимо через себя проксирует
- затем спарсить скриптом его ответ. Можно просто переслать в другого бота, который правда тоже сначала написать нужно. Ну или вручную скопировать в txt
- сгенерировать список ссылок от бота в формате html:<br>```<a href="https://tlgur.com/d/4NqxJvBg">001</a>```
- закодировать html по специальбному алгоритму от сервиса <https://4qr.xyz>
- выдать ссылку для просмотра на сайт 4qr.xyz. Сервис выводит данные переданные в URL, например закодированную ранее страницу
- при переходе по ссылке будет показаны ссылки на скачивание файлов по одному. Ну и самое главное, кнопка для скачивания всех файлов разом
- это и есть задача скрипта: одним кликом начать скачивать десятки файлов. Важно что бы не ругалось на безопасность
- можно еще подсократить ссылку через специальные сервисы типа tinyurl
- склеивать файл на стороне пользователя не требуется. У всех уже установлен архиватор, а если и нет, то виндовый проводник с этим справится

## Интерфейс
**Идеальное юзабилити выглядит так:**  
Просто перетягиваешь файл на скрипт и через пару имнут вылазит уведомление что ссылка на 4qr.xyz для скачивания файла скопирована в буфер обмена. Файлы хранятся почти вечно: скорее бот помрет, прежде чем телеграм начнет чистить кэш. Хотя [бывает](#) разное...


## upd
Бот как @tlgurbot. Проксирует прямые ссылки на файлы в телеге через себя. Но позволяет скачивать не что угодно, а только файлы с оплаченных каналов. Цена подписки высокая $10 месяц. Или демо с рекламой за $1/год. Оплата на год вперёд. Регулярная проверка на скам, если найдено - блокировка аккаунта и заморозка денег на счету до выяснения обстоятельств

При скачивании с демо канала показывать баннер со скам-рекламой на пол экрана, при клике по которой вылазит сообщение что не стоит кликать по таким подозрительным объявлениям. При прогрузке страницы проверяется загрузилась ли реклама, если да, то показать кнопку скачать (или сделать зелёной вместо серого). В скобочках под кнопкой сообщение что если кнопка серая - отключи адблок для этого сайта.

При первом скачивании в браузере - выводить уведомление об отказе от ответственности. Хранить согласие в куках и больше не спрашивать, автоматически перенаправляя по прямой ссылке на файл

На главной:
- about
- для жалоб
- antiabuse

_Рубрика "как я жизнь наебать пытался"_
