---
date: 2021-10-03T11:58:59+02:00
modified: 2021-11-03T11:59:46+02:00
title: Jekyll-Shop. Магазин на статике
comments: true
---

Возможно ли сделать магазин на Jekyll?

Если я когда нибудь его реализую, то пример будет тут: [/shop/](/shop/)

Да, это статика. Да и плевать. Для каталога товаров этого достаточно. Дальше будет работать сервис процессинга

## Как хранить базу
**Для каждого товара своя страница в папке /product/**  
Категории задаются как тег в заголовке

**Карточки товаров в markdown-формате распределены по дереву категорий**  
Категории в виде дерева папок. Нет возможности задавать несколько категорий одному товару. Хотя через теги тоже можно. у всех товаров будет отличаться формат URL-адреса.

**Datafiles в формате CSV или другом**  
Парсинг при обновлении этого файла

## Корзина
При добавлении товара в корзину - данные о нем сохраняются в куки бразузера. При оформлении заказа данные из куки выводятся на экран. Джаваскриптом подсчитывается сумма. После подтверждения генерируется номер заказа - набор случайных букв и цифр, так чтобы этот набор был уникальным, тоже запоминается в куки.

## Доставка
Выставляется форма с предзаполненными данными: уникальный номер заказа, список товаров, сумма.
Дополнительно требуется ввести данные для доставки (имя, телефон, метод доставки, адрес) и способ оплаты.  

После подтверждения - форма отправляется менеджеру на обработку.
Выводится сообщение, что заказ и получен и предлагается оплатить покупку. В сообщении указывается что заказ будет отправлен только после полной оплаты.

**Доставка формы**  
Это целая история. Можно использовать как сторонние серисы типа google forms или даже тупо через mailto попросить клиента самому отправить письмо. Можно, например, принимать данные через телеграм-бота. Хотя если есть возможность поднять бота, то наверное магаз на каком нибудь опенкарт будет эффективнее :)

## Оплата
Для оплаты нужно еще раз вручную выбрать метод оплаты кликнув на одну из ссылок, в которые заранее скриптами был подставлен уникальный номер заказа и сумма. Ссылка перекидывает на сайт процессинга. Он выведет сообщение о статусе оплаты: удалась или провалилась. Процессинг обрабатывает платеж и переводит деньги на счет продавца.  

Менеджер сверяет номер и сумму заказа полученный в письме с номером и суммой переведенные на счет через процессинговый сервис.
Затем, если все четко, он связывается с клиентом и сообщает трекинг-номер посылки или приглашает прийти забрать лично в точке выдачи.

## Регистрация
Регистрации нету. Максимум можно запомнить в куках данные для доставки. Там же хранится история покупок. Она исчезает при смене браузера, а посмотреть сохраненные данные можно на специальбной странице сайта. 

Желательно сохранять уникальное имя страницы товара в куках, что бы список товаров можно было вывести ссылками. О святой яваскрипт, помоги! Именно поэтому мне больше нравится идея хранить все товары в одной папке - они просто не смогут пересекться между собой.

## Обработка заказов
Тут уже зависит от фантазии продавца. Можно вручную обработывать - это для небольших количеств.  
Можно вести CRM и через нее все пробивать, но тогда зачем нужен статический сайт?

Если база товаров хранится как CSV, то скорее всего он генерируется из XLSX. Моя идея в том что бы письмо с заказом получала программа, которая стоит на компе у менеджера, парсила его и просила человека подтвердить правильность. После этого она сможет внести изменения в таблицу Excell из которого сгенерируется CSV и обновляется статический сайт.

После внесенных изменений в таблице - печатается товарная накладная. Она передается на склад, где комплектуется заказ и происходит отправка или выдача товара.
