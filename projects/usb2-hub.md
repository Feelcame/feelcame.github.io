---
title: Док-станция. 4xUSB, Ethernet, MicroSD, Audio
date: 2021-10-03T00:00:00
modified: 2023-03-30T00:00:00
tags: hard
---

Обычный такой хаб, но со встроеным кардридером, сетевой и аудио-картой. Идея в том чтобы подключать всю эту периферию к хосту одним кабелем USB. Разъем USB typeC male версии 2.0. От внешнего источника запитывается периферия и заряжается планшет (телефон/ноутбук). Монитор подключается по HDMI и не вижу смысла его пихать на линию USB

- Навигатор
{: toc }

## Механика
Хаб прямоугольной формы. Кабель с разъемом USB-C впаянный, длина 30см. Со стороны кабеля два разъема для аудио. С противоположной стороны разъем RJ-45 для интернета и DS5521 для внешнего питания. Разъемы USB расположены по бокам. Между ними отступ, что бы влезали широкие кабели. 

Для звука два разъема. Первый для постоянного подключения ((колонок или гарнитуры)) и второй для микрофона-петлички. Для колонок используется комбинированный разъем (4 контакта) для корректной работы гарнитуры. При подключении петлички сигнал микрофона автоматически переключается на нее

**Вариант с MicroSD на обратной стороне**  
![image](https://user-images.githubusercontent.com/17731587/228858617-0c51b713-e142-471d-932e-bf5ea887f98b.png)

**Вариант с MicroSD на верхней стороне платы**  
![image](https://user-images.githubusercontent.com/17731587/228879669-ec263a62-25e8-4d83-9502-4ed08b9b31c8.png)

как варик оставшийся разъем можно вывести сверху. так будет удобно подключать флешку или например фонарик. или оставить неразведенным для встраивания каких то устройств, нопроимер вайфая или bluetooth   
![image](https://user-images.githubusercontent.com/17731587/228986853-75eda44d-d625-426a-97c8-2b4689fff0c1.png)



## Питание  
От внешнего источника запитывается периферия и заряжается хост. Соответсвеннго понадобится контроллер, который будет рулить всем этим хозяйством

Можно парвллельно с круглым разъемом питания вывести еще гнездо тайпСи для запитки от штатного БП.

Также есть идея встроить KVM-switch. Добавить на вход, прараленльно кабелю питания, один разъем (mini / micro / typeC) и кнопку переключатель
 
## Схемотехника
Подключить последовательно две микросхемы USB-2.0-хаба. Соответственно получится 7 USB-портов: три у первой микрухи и еще четыре у второй  

**Первая микросхема:**
- Ethernet. Может отжирать до 10 мбайт/с из доступных на шине 25
- MicroSD-ридер. Обычные дешевые кардридеры раскачивают 8мб/с, но нужно обеспечить максимальную полосу
- Один USB-разъем зарезервирован для нешнего HDD (например)
- В последний порт подключен следующий хаб

**Вторая микросхема:**
- Аудиокарта
- Разъем для клавы
- Разъем для мышки
- Последний разъем про запас


## Компоненты
**Микросхемы:**
- **FE2.1** - микросхема USB Hub<br>
  Альтернативы: FE1.1 / FE1.1s
- **RTL8152B** - микросхема Ethernet to USB
- аудиоинтерфейс
- кардридер
- контроллер питания

**Разъемы:**
- **USB-AF** - разъемы USB мама<br>
  [Разъем USB Type A (мама, двойной, горизонтальный)](https://www.lcsc.com/product-detail/span-style-background-color-ff0-USB-span-Connectors_Jing-Extension-of-the-Electronic-Co-907-111A1022D10200_C12049.html),
  [Разъем USB Micro A](),
  [Разъем USB Mini A](),
  [Разъем USB Type C]()
- **DC5521** - разъем внешнего питания
- Разъем Ethernet<br>
  [Разъем Ethernet со встроенными трансформаторами](#)
- Разъем аудио
- трансивер usb2ble для мышки


## Правила проектирования
- Как развести линии USB


## Полезные сссылки
- <http://we.easyelectronics.ru/electro-and-pc/fe11-fe21-ili-chto-nam-stoit-usb-hub-postroit.html>
- Док станция для одного древнего планшета представляет из себя длинный провод с нанизанными как виноградины разъемами <https://youtu.be/5ydvkZRqXhA?t=406> + [image](https://user-images.githubusercontent.com/17731587/228510183-79c23663-8226-4183-94e6-a77d0ebc6f0a.png)
